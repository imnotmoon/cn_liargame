(this.webpackJsonpliargame=this.webpackJsonpliargame||[]).push([[0],{111:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(46),r=c.n(a),i=(c(53),c(2)),l=(c(54),c(9)),o=c(0);var j=function(e){var t=e.chat,c=t.content,n=t.from;return Object(o.jsxs)("span",{className:"self"===n?"chatMessage my_message":"chatMessage",children:[Object(o.jsx)("span",{className:"chat__profile",style:{marginRight:"5px"},children:"self"===n?"":n}),Object(o.jsx)("span",{className:"chat__text",children:c})]})},u=(c(21),[]);var d=function(e){var t=e.title,c=Object(n.useState)(""),s=Object(i.a)(c,2),a=s[0],r=s[1],d=Object(n.useState)([]),b=Object(i.a)(d,2),O=b[0],f=b[1],h=Object(n.useContext)(S),m=Object(i.a)(h,2),x=m[0],v=(m[1],Object(n.useRef)()),p=function(e){r(e.currentTarget.value)};console.log("RENDER : CHAT : ",x);var g=function(e){e.preventDefault(),C.emit("chat",{state:"chat",player:x,text:a}),r("")},k=function(e){"Enter"!==e.key&&"Return"!==e.key||g(e)};return Object(n.useEffect)((function(){return document.getElementById("input-text").addEventListener("keypress",k),function(){try{document.getElementById("input-text").removeEventListener("keypress",k)}catch(e){console.log("\uc544\uc9c1..")}}})),Object(n.useEffect)((function(){C.on("chat",(function(e){var t=e.state,c=e.player,n=e.text;"chat"===t&&x&&(console.log("rcvd : ",c,n),console.log("player : ",c," - nickname : ",x),c=c===x?"self":c,console.log("nickname : ",c),u.push({content:n,from:c}),console.log(u),f(Object(l.a)(u)))}))}),[x]),Object(n.useEffect)((function(){return function(){u=[],C.offAny("chat")}}),[]),Object(o.jsx)(S.Consumer,{children:function(){return Object(o.jsxs)("div",{className:"chat frame",children:[Object(o.jsx)("div",{className:"chat__title",children:Object(o.jsx)("p",{children:t})}),Object(o.jsx)("div",{className:"chat__content",ref:v,children:O.map((function(e,t){return Object(o.jsx)(j,{chat:e,className:"chat__messages"},t)}))}),Object(o.jsxs)("div",{className:"chat__sender",children:[Object(o.jsx)("input",{type:"text",onChange:p,value:a,id:"input-text"}),Object(o.jsx)("button",{onClick:g,children:"\uc804\uc1a1"})]})]})}})};c(56);var b=function(e){var t=e.liar,c=e.title,s=e.players,a=Object(n.useState)(3),r=Object(i.a)(a,2),l=r[0],j=r[1],u=Object(n.useContext)(S),d=Object(i.a)(u,2),b=d[0];d[1],console.log(s);var O=function(e){l>0?(s.forEach((function(t){t.vote=t.nickname===e.currentTarget.getAttribute("data")?1:0})),console.log(s),j((function(e){return e-1}))):alert("\ub354 \uc774\uc0c1 \ud22c\ud45c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")};return Object(o.jsxs)("div",{className:"vote frame",children:[Object(o.jsx)("div",{className:"vote__title",children:Object(o.jsx)("p",{children:c})}),t?Object(o.jsx)("div",{className:"vote__status",children:s.map((function(e,t){return e.nickname!==b&&Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{children:e.nickname}),Object(o.jsx)("span",{children:"\ub098\ub97c \uc9c0\ubaa9"})]},t)}))}):Object(o.jsxs)("div",{className:"vote__players",children:[s.map((function(e,t){return e.nickname!==b&&Object(o.jsxs)("div",{onClick:O,data:e.nickname,className:"vote__cell"+(1===e.vote?" check":""),children:[Object(o.jsx)("span",{children:e.nickname}),Object(o.jsx)("div",{className:"vote__check",children:"O"})]},t)})),Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:["\ub0a8\uc740 \ud22c\ud45c \ud69f\uc218 : ",l,"/3 \ud68c"]})})]})]})},O=(c(57),{liar:"\uc870\uc138\ud76c",picked:{"\ubb38\uc0c1\ud601":"\uc870\uc138\ud76c","\uc774\ud558\uc740":"\uc870\uc138\ud76c","\uc815\uc138\uc740":"\ubb38\uc0c1\ud601"}});var f=function(e){var t=e.liar,c=e.nickname,s=Object(n.useState)([]),a=Object(i.a)(s,2),r=a[0],j=a[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),b=d[0],f=d[1];return Object(n.useEffect)((function(){if(console.log(O),C.on("result",(function(e){var t=e.state,c=e.liar,n=e.picked;console.log("result message received : ",c,n),"result"===t&&(O.liar=c,O.picked=n)})),2===t){var e=0;Object.keys(O.picked).forEach((function(t){var c=O.picked[t];console.log(t,c),c===O.liar&&(e+=1,j((function(e){return[].concat(Object(l.a)(e),[t])})),console.log(r))})),f(!(e>=2))}else Object.keys(O.picked).forEach((function(e){var t=O.picked[e];e===c&&t===O.liar&&(console.log(c,e,O.liar,t),console.log("\uc774\uacbc\uad6c\ub9cc"),f((function(e){return!e})))}))}),[]),Object(o.jsxs)("div",{className:"finishModal frame modal",children:[Object(o.jsx)("div",{className:"title",children:!0===b?"\uac8c\uc784\uc5d0\uc11c \uc2b9\ub9ac\ud588\uc2b5\ub2c8\ub2e4":"\uac8c\uc784\uc5d0\uc11c \ud328\ubc30\ud588\uc2b5\ub2c8\ub2e4"}),!0===b?"":1===t?Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"\ub77c\uc774\uc5b4\ub294"}),Object(o.jsx)("div",{children:O.liar})]}):Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"\ub098\ub97c \ub77c\uc774\uc5b4\ub85c \uc9c0\ubaa9\ud55c \uc0ac\ub78c"}),Object(o.jsx)("div",{children:r.map((function(e,t){return Object(o.jsx)("span",{children:e},t)}))})]})]})},h=(c(58),c(47)),m=c.n(h);function x(e){var t=e.liar,c=e.players,s=e.nickname,a=Object(n.useState)(!1),r=Object(i.a)(a,2),l=r[0],j=r[1];return C.on("result",(function(e){e.state,e.liar,e.picked;j(!0),m.a.post("http://13.125.236.234:3001/",{vote:"heheheheheheheh"}).then((function(e){console.log(e)}))})),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"inGame",children:[1===t?Object(o.jsx)(b,{liar:!1,title:"\ub204\uac00 \ub77c\uc774\uc5b4\uc785\ub2c8\uae4c?",players:c}):Object(o.jsx)(b,{liar:!0,title:"\ub098\ub97c \uc9c0\ubaa9\ud55c \uc0ac\ub78c",players:c}),Object(o.jsx)(d,{title:1===t?"\ub2e8\uc5b4\ub97c \uc124\uba85\ud574\uc8fc\uc138\uc694":"\ub2e8\uc5b4\uc5d0 \ub300\ud574 \uc544\ub294\ucc99 \ud574\uc8fc\uc138\uc694"})]}),l&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f,{liar:t,nickname:s}),Object(o.jsx)("div",{className:"modal-background"})]})]})}var v=[];var p=function(e){var t=e.title,c=Object(n.useState)(""),s=Object(i.a)(c,2),a=s[0],r=s[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),b=d[0],O=d[1],f=Object(n.useContext)(S),h=Object(i.a)(f,2),m=h[0],x=(h[1],Object(n.useRef)()),p=function(e){r(e.currentTarget.value)};console.log("RENDER : CHAT : ",m);var g=function(e){e.preventDefault(),C.emit("chat",{state:"chat",player:m,text:a}),r("")},k=function(e){"Enter"!==e.key&&"Return"!==e.key||g(e)};return Object(n.useEffect)((function(){return document.getElementById("input-text").addEventListener("keypress",k),function(){try{document.getElementById("input-text").removeEventListener("keypress",k)}catch(e){console.log("\uc544\uc9c1..")}}})),Object(n.useEffect)((function(){C.on("chat",(function(e){var t=e.state,c=e.player,n=e.text;"chat"===t&&m&&(console.log("rcvd : ",c,n),console.log("player : ",c," - nickname : ",m),c=c===m?"self":c,console.log("nickname : ",c),v.push({content:n,from:c}),console.log(v),O(Object(l.a)(v)))}))}),[m]),Object(n.useEffect)((function(){return function(){v=[],C.offAny("chat")}}),[]),Object(o.jsx)(S.Consumer,{children:function(){return Object(o.jsxs)("div",{className:"chat frame",children:[Object(o.jsx)("div",{className:"chat__title",children:Object(o.jsx)("p",{children:t})}),Object(o.jsx)("div",{className:"chat__content",ref:x,children:b.map((function(e,t){return Object(o.jsx)(j,{chat:e,className:"chat__messages"},t)}))}),Object(o.jsxs)("div",{className:"chat__sender",children:[Object(o.jsx)("input",{type:"text",onChange:p,value:a,id:"input-text"}),Object(o.jsx)("button",{onClick:g,children:"\uc804\uc1a1"})]})]})}})};c(76);var g=function(e){var t=e.players;return Object(o.jsxs)("div",{className:"waitingRoom frame",children:[Object(o.jsx)("div",{className:"waitingRoom__title",children:Object(o.jsx)("p",{children:"\ub300\uae30\uc2e4"})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{children:["\ucc38\uc5ec\uc778\uc6d0 : ",t.length,"/4\uba85"]}),t.map((function(e,t){return Object(o.jsx)("div",{className:"waitingRoom__player",children:Object(o.jsx)("p",{children:e})},t)}))]})]})};c(77);var k=function(e){var t=e.liar,c=e.word;return Object(o.jsxs)("div",{className:"startGameModal frame modal",children:[Object(o.jsx)("div",{className:"title",children:t?Object(o.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uc785\ub2c8\ub2e4."}):Object(o.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uac00 \uc544\ub2d9\ub2c8\ub2e4."})}),!t&&Object(o.jsx)("div",{className:"word",children:Object(o.jsx)("div",{children:Object(o.jsx)("p",{children:c})})}),Object(o.jsx)("div",{className:"startGameModal__timer",children:"5\ucd08 \ub4a4 \uac8c\uc784\uc774 \uc2dc\uc791\ub429\ub2c8\ub2e4"})]})};c(78);function y(e){var t=e.nickname,c=Object(n.useContext)(w),s=c.setNowPlaying,a=c.setGamePlayers,r=Object(n.useState)([]),j=Object(i.a)(r,2),u=j[0],d=j[1],b=Object(n.useState)(!1),O=Object(i.a)(b,2),f=O[0],h=O[1],m=Object(n.useState)(t),x=Object(i.a)(m,2),v=(x[0],x[1],Object(n.useState)(!1)),y=Object(i.a)(v,2),N=y[0],_=y[1],E=Object(n.useState)("\ucef4\ub124"),R=Object(i.a)(E,2),S=R[0],A=R[1];return console.log("Waiting RENDERED : ",t),Object(n.useEffect)((function(){return C.on("enter",(function(e){var t=e.state,c=e.player;"enter"===t&&d((function(e){return c}))})),C.on("gameset",(function(e){var c=e.state,n=e.player,r=e.liar,i=e.word;return console.log("gameset",n,r,i),console.log(t),"gameset"===c&&(_(r===t),r&&A(i),h(!0),setTimeout((function(){h(!1),s(r===t?2:1),a(n.reduce((function(e,t){return[].concat(Object(l.a)(e),[{nickname:t,vote:0}])}),[]))}),5e3)),C.offAny()})),C.offAny()}),[t]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(w.Consumer,{children:function(){return Object(o.jsxs)("div",{className:"waiting",children:[Object(o.jsx)(g,{players:u}),Object(o.jsx)(p,{title:"\ucc44\ud305"})]})}}),f&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(k,{liar:N,word:S}),Object(o.jsx)("div",{className:"modal-background"})]})]})}c(79);var N=function(){return Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("p",{children:"\ub77c\uc774\uc5b4\uac8c\uc784"}),Object(o.jsx)("div",{className:"header__exitBtn",onClick:function(){window.open("about:blank","_self"),window.close()},children:Object(o.jsx)("p",{children:"\ub098\uac00\uae30"})})]})};c(80);function _(e){var t=e.setNickname,c=Object(n.useState)(""),s=Object(i.a)(c,2),a=s[0],r=s[1],l=Object(n.useRef)();Object(n.useEffect)((function(){l.current.focus()}));var j=function(e){r(e.currentTarget.value)},u=function(e){console.log(a),t(a),C.emit("enter",{state:"enter",player:a}),console.log("emit 'enter' message : ")};return Object(o.jsx)(S.Consumer,{children:function(){return Object(o.jsxs)("div",{className:"nicknameModal frame modal",children:[Object(o.jsx)("div",{className:"title",children:"\uc548\ub155\ud558\uc138\uc694!"}),Object(o.jsx)("div",{className:"content",children:Object(o.jsx)("p",{children:"\uc0ac\uc6a9\ud560 \ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})}),Object(o.jsx)("input",{type:"text",placeholder:"\ub2c9\ub124\uc784",onChange:j,ref:l}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{className:"submitBtn",onClick:u,children:"\ud655\uc778"})]})}})}var E=c(48),C=c.n(E).a.connect("".concat("http://13.125.236.234:3001/"));function R(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(0),r=Object(i.a)(a,2),l=r[0],j=r[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),b=d[0],O=d[1];return console.log("APP RENDERED : ",c),Object(n.useEffect)((function(){C.on("connection",(function(e){console.log(e)}),[])})),Object(n.useEffect)((function(){s(c)}),[c]),Object(o.jsx)(S.Provider,{value:[c,s],children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(N,{}),Object(o.jsx)(w.Provider,{value:{setNowPlaying:j,setGamePlayers:O},children:0!==l?Object(o.jsx)(x,{liar:l,players:b,nickname:c}):Object(o.jsx)(y,{nickname:c})}),!c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(_,{setNickname:s}),Object(o.jsx)("div",{className:"modal-background"})]})]})})}var S=s.a.createContext(),w=s.a.createContext();r.a.render(Object(o.jsx)(R,{}),document.getElementById("root"))},21:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){}},[[111,1,2]]]);
//# sourceMappingURL=main.0170e495.chunk.js.map