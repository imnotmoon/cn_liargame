(this.webpackJsonpliargame=this.webpackJsonpliargame||[]).push([[0],{111:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(46),i=c.n(a),r=(c(53),c(2)),l=(c(54),c(10)),j=c(0);var o=function(e){var t=e.chat,c=t.content,n=t.from;return Object(j.jsxs)("span",{className:"self"===n?"chatMessage my_message":"chatMessage",children:[Object(j.jsx)("span",{className:"chat__profile",style:{marginRight:"5px"},children:"self"===n?"":n}),Object(j.jsx)("span",{className:"chat__text",children:c})]})},u=(c(21),[]);var d=function(e){var t=e.title,c=Object(n.useState)(""),s=Object(r.a)(c,2),a=s[0],i=s[1],d=Object(n.useState)([]),b=Object(r.a)(d,2),O=b[0],f=b[1],m=Object(n.useContext)(R),h=Object(r.a)(m,2),x=h[0],v=(h[1],Object(n.useRef)()),p=function(e){i(e.currentTarget.value)},g=function(e){e.preventDefault(),C.emit("chat",{state:"chat",player:x,text:a}),i("")},N=function(e){"Enter"!==e.key&&"Return"!==e.key||g(e)};return Object(n.useEffect)((function(){return document.getElementById("input-text").addEventListener("keypress",N),function(){try{document.getElementById("input-text").removeEventListener("keypress",N)}catch(e){console.log("\uc544\uc9c1..")}}})),Object(n.useEffect)((function(){C.on("chat",(function(e){var t=e.state,c=e.player,n=e.text;"chat"===t&&x&&(c=c===x?"self":c,u.push({content:n,from:c}),console.log(u),f(Object(l.a)(u)))}))}),[x]),Object(n.useEffect)((function(){return function(){u=[],C.offAny("chat")}}),[]),Object(j.jsx)(R.Consumer,{children:function(){return Object(j.jsxs)("div",{className:"chat frame",children:[Object(j.jsx)("div",{className:"chat__title",children:Object(j.jsx)("p",{children:t})}),Object(j.jsx)("div",{className:"chat__content",ref:v,children:O.map((function(e,t){return Object(j.jsx)(o,{chat:e,className:"chat__messages"},t)}))}),Object(j.jsxs)("div",{className:"chat__sender",children:[Object(j.jsx)("input",{type:"text",onChange:p,value:a,id:"input-text"}),Object(j.jsx)("button",{onClick:g,children:"\uc804\uc1a1"})]})]})}})};c(56);function b(e){var t=e.liar,c=e.title,s=e.players,a=Object(n.useState)(3),i=Object(r.a)(a,2),l=i[0],o=i[1],u=Object(n.useContext)(R),d=Object(r.a)(u,2),b=d[0],O=(d[1],function(e){l>0?(s.forEach((function(t){t.vote=t.nickname===e.currentTarget.getAttribute("data")?1:0})),o((function(e){return e-1}))):alert("\ub354 \uc774\uc0c1 \ud22c\ud45c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")});return Object(j.jsxs)("div",{className:"vote frame",children:[Object(j.jsx)("div",{className:"vote__title",children:Object(j.jsx)("p",{children:c})}),t?Object(j.jsx)("div",{className:"vote__status",children:s.map((function(e,t){return e.nickname!==b&&Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:e.nickname}),Object(j.jsx)("span",{children:"\ub098\ub97c \uc9c0\ubaa9"})]},t)}))}):Object(j.jsxs)("div",{className:"vote__players",children:[s.map((function(e,t){return e.nickname!==b&&Object(j.jsxs)("div",{onClick:O,data:e.nickname,className:"vote__cell"+(1===e.vote?" check":""),children:[Object(j.jsx)("span",{children:e.nickname}),Object(j.jsx)("div",{className:"vote__check",children:"O"})]},t)})),Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:["\ub0a8\uc740 \ud22c\ud45c \ud69f\uc218 : ",l,"/3 \ud68c"]})})]})]})}var O=s.a.memo(b);c(57);var f=function(e){var t=e.liar,c=e.win,n=e.picked,s=e.liarName;return Object(j.jsxs)("div",{className:"finishModal frame modal",children:[Object(j.jsx)("div",{className:"title",children:!0===c?"\uac8c\uc784\uc5d0\uc11c \uc2b9\ub9ac\ud588\uc2b5\ub2c8\ub2e4":"\uac8c\uc784\uc5d0\uc11c \ud328\ubc30\ud588\uc2b5\ub2c8\ub2e4"}),!0===c?"":1===t?Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"\ub77c\uc774\uc5b4\ub294"}),Object(j.jsx)("div",{children:s})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"\ub098\ub97c \ub77c\uc774\uc5b4\ub85c \uc9c0\ubaa9\ud55c \uc0ac\ub78c"}),Object(j.jsx)("div",{children:n.map((function(e,t){return Object(j.jsx)("div",{children:e},t)}))})]})]})},m=(c(58),c(47)),h=c.n(m);function x(e){var t=e.liar,c=e.players,s=e.nickname,a=Object(n.useState)(!1),i=Object(r.a)(a,2),l=i[0],o=i[1],u=Object(n.useState)({win:!1,picked:[],liar:""}),b=Object(r.a)(u,2),m=b[0],h=b[1];return C.on("result",(function(e){var t=e.state,n=e.liar,a=e.picked;console.log("result !!!! ",n,a),o(!0),"result"===t&&4===c.length&&c.forEach((function(e){1===e.vote&&v(s,e)}))})),C.on("end",(function(e){console.log("end : ",e);var c=[],n=e.picked.reduce((function(t,n){return e.liar===n.vote?(c.push(n.nickname),t+1):t}),0),a=!1;2===t?n>=2?(console.log("\ud328\ubc30 - \ub77c\uc774\uc5b4"),a=!1):(console.log("\uc2b9\ub9ac - \ub77c\uc774\uc5b4"),a=!0):c.includes(s)?(console.log(s,"\uc2b9\ub9ac"),a=!0):(console.log(s,"\ud328\ubc30"),a=!1),h({win:a,picked:c,liar:e.liar})})),Object(n.useEffect)((function(){return function(){C.off("result"),C.off("end")}}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"inGame",children:[1===t?Object(j.jsx)(O,{liar:!1,title:"\ub204\uac00 \ub77c\uc774\uc5b4\uc785\ub2c8\uae4c?",players:c}):"",Object(j.jsx)(d,{title:1===t?"\ub2e8\uc5b4\ub97c \uc124\uba85\ud574\uc8fc\uc138\uc694":"\ub2e8\uc5b4\uc5d0 \ub300\ud574 \uc544\ub294\ucc99 \ud574\uc8fc\uc138\uc694"})]}),l&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(f,{liar:m.liar===s?2:1,win:m.win,picked:m.picked,liarName:m.liar}),Object(j.jsx)("div",{className:"modal-background"})]})]})}var v=function(e,t){console.log(e,t),h.a.post("http://13.125.236.234:3001/",{nickname:e,vote:t.nickname}).then((function(e){console.log(e)}))},p=[];var g=function(e){var t=e.title,c=Object(n.useState)(""),s=Object(r.a)(c,2),a=s[0],i=s[1],u=Object(n.useState)([]),d=Object(r.a)(u,2),b=d[0],O=d[1],f=Object(n.useContext)(R),m=Object(r.a)(f,2),h=m[0],x=(m[1],Object(n.useRef)()),v=function(e){i(e.currentTarget.value)},g=function(e){e.preventDefault(),C.emit("chat",{state:"chat",player:h,text:a}),i("")},N=function(e){"Enter"!==e.key&&"Return"!==e.key||g(e)};return Object(n.useEffect)((function(){return document.getElementById("input-text").addEventListener("keypress",N),function(){try{document.getElementById("input-text").removeEventListener("keypress",N)}catch(e){console.log("\uc544\uc9c1..")}}})),Object(n.useEffect)((function(){C.on("chat",(function(e){var t=e.state,c=e.player,n=e.text;"chat"===t&&h&&(c=c===h?"self":c,p.push({content:n,from:c}),console.log(p),O(Object(l.a)(p)))}))}),[h]),Object(n.useEffect)((function(){return function(){p=[],C.offAny("chat")}}),[]),Object(j.jsx)(R.Consumer,{children:function(){return Object(j.jsxs)("div",{className:"chat frame",children:[Object(j.jsx)("div",{className:"chat__title",children:Object(j.jsx)("p",{children:t})}),Object(j.jsx)("div",{className:"chat__content",ref:x,children:b.map((function(e,t){return Object(j.jsx)(o,{chat:e,className:"chat__messages"},t)}))}),Object(j.jsxs)("div",{className:"chat__sender",children:[Object(j.jsx)("input",{type:"text",onChange:v,value:a,id:"input-text"}),Object(j.jsx)("button",{onClick:g,children:"\uc804\uc1a1"})]})]})}})};c(76);var N=function(e){var t=e.players;return Object(j.jsxs)("div",{className:"waitingRoom frame",children:[Object(j.jsx)("div",{className:"waitingRoom__title",children:Object(j.jsx)("p",{children:"\ub300\uae30\uc2e4"})}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:["\ucc38\uc5ec\uc778\uc6d0 : ",t.length,"/4\uba85"]}),t.map((function(e,t){return Object(j.jsx)("div",{className:"waitingRoom__player",children:Object(j.jsx)("p",{children:e})},t)}))]})]})};c(77);var k=function(e){var t=e.liar,c=e.word;return Object(j.jsxs)("div",{className:"startGameModal frame modal",children:[Object(j.jsx)("div",{className:"title",children:t?Object(j.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uc785\ub2c8\ub2e4."}):Object(j.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uac00 \uc544\ub2d9\ub2c8\ub2e4."})}),!t&&Object(j.jsx)("div",{className:"word",children:Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:c})})}),Object(j.jsx)("div",{className:"startGameModal__timer",children:"5\ucd08 \ub4a4 \uac8c\uc784\uc774 \uc2dc\uc791\ub429\ub2c8\ub2e4"})]})};c(78);function y(e){var t=e.nickname,c=Object(n.useContext)(B),s=c.setNowPlaying,a=c.setGamePlayers,i=Object(n.useState)([]),o=Object(r.a)(i,2),u=o[0],d=o[1],b=Object(n.useState)(!1),O=Object(r.a)(b,2),f=O[0],m=O[1],h=Object(n.useState)(t),x=Object(r.a)(h,2),v=(x[0],x[1],Object(n.useState)(!1)),p=Object(r.a)(v,2),y=p[0],_=p[1],E=Object(n.useState)("\uae40\uce58\ub9cc\ub450"),w=Object(r.a)(E,2),S=w[0],R=w[1];return Object(n.useEffect)((function(){return C.on("enter",(function(e){var t=e.state,c=e.player;"enter"===t&&d((function(e){return c}))})),C.on("gameset",(function(e){var c=e.state,n=e.player,i=e.liar,r=e.word;return"gameset"===c&&(console.log(i,r),_(i===t),i&&R(r),m(!0),setTimeout((function(){m(!1),s(i===t?2:1),a(n.reduce((function(e,t){return[].concat(Object(l.a)(e),[{nickname:t,vote:0}])}),[]))}),5e3)),C.offAny()})),C.offAny()}),[t]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(B.Consumer,{children:function(){return Object(j.jsxs)("div",{className:"waiting",children:[Object(j.jsx)(N,{players:u}),Object(j.jsx)(g,{title:"\ucc44\ud305"})]})}}),f&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k,{liar:y,word:S}),Object(j.jsx)("div",{className:"modal-background"})]})]})}c(79);var _=function(){return Object(j.jsxs)("div",{className:"header",children:[Object(j.jsx)("p",{children:"\ub77c\uc774\uc5b4\uac8c\uc784"}),Object(j.jsx)("div",{className:"header__exitBtn",onClick:function(){window.open("about:blank","_self"),window.close()},children:Object(j.jsx)("p",{children:"\ub098\uac00\uae30"})})]})};c(80);function E(e){var t=e.setNickname,c=Object(n.useState)(""),s=Object(r.a)(c,2),a=s[0],i=s[1],l=Object(n.useRef)();Object(n.useEffect)((function(){l.current.focus()}));var o=function(e){i(e.currentTarget.value)},u=function(e){console.log(a),t(a),C.emit("enter",{state:"enter",player:a}),console.log("emit 'enter' message : ")};return Object(j.jsx)(R.Consumer,{children:function(){return Object(j.jsxs)("div",{className:"nicknameModal frame modal",children:[Object(j.jsx)("div",{className:"title",children:"\uc548\ub155\ud558\uc138\uc694!"}),Object(j.jsx)("div",{className:"content",children:Object(j.jsx)("p",{children:"\uc0ac\uc6a9\ud560 \ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})}),Object(j.jsx)("input",{type:"text",placeholder:"\ub2c9\ub124\uc784",onChange:o,ref:l}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:"submitBtn",onClick:u,children:"\ud655\uc778"})]})}})}var w=c(48),C=c.n(w).a.connect("".concat("http://13.125.236.234:3001/"));function S(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(0),i=Object(r.a)(a,2),l=i[0],o=i[1],u=Object(n.useState)([]),d=Object(r.a)(u,2),b=d[0],O=d[1];return Object(n.useEffect)((function(){C.on("connection",(function(e){console.log(e)}),[])})),Object(n.useEffect)((function(){s(c)}),[c]),Object(j.jsx)(R.Provider,{value:[c,s],children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(_,{}),Object(j.jsx)(B.Provider,{value:{setNowPlaying:o,setGamePlayers:O},children:0!==l?Object(j.jsx)(x,{liar:l,players:b,nickname:c}):Object(j.jsx)(y,{nickname:c})}),!c&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(E,{setNickname:s}),Object(j.jsx)("div",{className:"modal-background"})]})]})})}var R=s.a.createContext(),B=s.a.createContext();i.a.render(Object(j.jsx)(S,{}),document.getElementById("root"))},21:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){}},[[111,1,2]]]);
//# sourceMappingURL=main.3f90efaf.chunk.js.map