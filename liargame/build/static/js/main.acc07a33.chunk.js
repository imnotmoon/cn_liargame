/*! For license information please see main.acc07a33.chunk.js.LICENSE.txt */
(this.webpackJsonpliargame=this.webpackJsonpliargame||[]).push([[0],{24:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=24},25:function(e,t){},47:function(e,t,c){},48:function(e,t,c){},50:function(e,t,c){},52:function(e,t){},53:function(e,t){},54:function(e,t){},55:function(e,t){},56:function(e,t){},57:function(e,t){},58:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},96:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(41),r=c.n(s),i=(c(47),c(2)),o=(c(48),c(0));var j=function(e){var t=e.chat,c=t.content,n=t.from;return Object(o.jsxs)("span",{className:"self"===n?"chatMessage my_message":"chatMessage",children:[Object(o.jsx)("span",{className:"chat__profile",style:{marginRight:"5px"},children:"self"===n?"":n}),Object(o.jsx)("span",{className:"chat__text",children:c})]})},l=(c(50),[]);var u=function(e){var t=e.title,c=(e.mount,Object(n.useState)("")),a=Object(i.a)(c,2),s=a[0],r=a[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),b=d[0],O=d[1],f=Object(n.useContext)(S),h=Object(i.a)(f,2),m=h[0],x=(h[1],Object(n.useRef)());console.log("NICKNAME : ",m);var v=function(e){e.preventDefault(),w.emit("chat",{state:"chat",player:m,text:s}),r("")},p=function(e){"Enter"!==e.key&&"Return"!==e.key||v(e)};return Object(n.useEffect)((function(){return document.getElementById("input-text").addEventListener("keypress",p),function(){try{document.getElementById("input-text").removeEventListener("keypress",p)}catch(e){console.log("\uc544\uc9c1..")}}})),Object(n.useEffect)((function(){w.on("chat",(function(e){var t=e.state,c=e.player,n=e.text;console.log("receive - chat",c,n,m),c=c===m?"self":c,"chat"===t&&m&&(l.push({content:n,from:c}),O([].concat(l)),x.current.scrollTop=x.current.scrollHeight)}))}),[m]),Object(o.jsxs)("div",{className:"chat frame",children:[Object(o.jsx)("div",{className:"chat__title",children:Object(o.jsx)("p",{children:t})}),Object(o.jsx)("div",{className:"chat__content",ref:x,children:b.map((function(e,t){return Object(o.jsx)(j,{chat:e,className:"chat__messages"},t)}))}),Object(o.jsxs)("div",{className:"chat__sender",children:[Object(o.jsx)("input",{type:"text",onChange:function(e){r(e.currentTarget.value)},value:s,id:"input-text"}),Object(o.jsx)("button",{onClick:v,children:"\uc804\uc1a1"})]})]})};c(51),c(58);var d=function(e){var t=e.liar,c=e.title,a=Object(n.useState)(3),s=Object(i.a)(a,2),r=s[0],j=s[1],l=Object(n.useContext)(S),u=Object(i.a)(l,2),d=u[0],b=(u[1],Object(n.useContext)(p)),O=Object(i.a)(b,2),f=O[0],h=(O[1],function(e){r>0?(f.forEach((function(t){t.vote=t.nickname===e.currentTarget.getAttribute("data")?1:0})),console.log(f),j((function(e){return e-1}))):alert("\ub354 \uc774\uc0c1 \ud22c\ud45c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")});return Object(o.jsx)(p.Consumer,{children:function(){return Object(o.jsxs)("div",{className:"vote frame",children:[Object(o.jsx)("div",{className:"vote__title",children:Object(o.jsx)("p",{children:c})}),t?Object(o.jsx)("div",{className:"vote__status",children:f.map((function(e,t){return e.nickname!==d&&Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{children:e.nickname}),Object(o.jsx)("span",{children:"\ub098\ub97c \uc9c0\ubaa9"})]},t)}))}):Object(o.jsxs)("div",{className:"vote__players",children:[f.map((function(e,t){return e.nickname!==d&&Object(o.jsxs)("div",{onClick:h,data:e.nickname,className:"vote__cell"+(1===e.vote?" check":""),children:[Object(o.jsx)("span",{children:e.nickname}),Object(o.jsx)("div",{className:"vote__check",children:"O"})]},t)})),Object(o.jsx)("div",{children:Object(o.jsxs)("p",{children:["\ub0a8\uc740 \ud22c\ud45c \ud69f\uc218 : ",r,"/3 \ud68c"]})})]})]})}})},b=c(17),O=c(9),f=c.n(O),h=c(16),m=(c(60),{liar:"\uc870\uc138\ud76c",picked:{"\ubb38\uc0c1\ud601":"\uc870\uc138\ud76c","\uc774\ud558\uc740":"\uc870\uc138\ud76c","\uc815\uc138\uc740":"\ubb38\uc0c1\ud601"}});var x=function(e){var t=e.liar,c=e.nickname,a=Object(n.useState)([]),s=Object(i.a)(a,2),r=s[0],j=s[1],l=Object(n.useState)(!1),u=Object(i.a)(l,2),d=u[0],O=u[1];return Object(n.useEffect)((function(){if(console.log(m),w.on("result",function(){var e=Object(h.a)(f.a.mark((function e(t){var c,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.state,n=t.liar,a=t.picked,console.log("result message received : ",n,a),"result"==c&&(m.liar=n,m.picked=a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),2===t){var e=0;Object.keys(m.picked).forEach((function(t){var c=m.picked[t];console.log(t,c),c===m.liar&&(e+=1,j((function(e){return[].concat(Object(b.a)(e),[t])})),console.log(r))})),O(!(e>=2))}else Object.keys(m.picked).forEach((function(e){var t=m.picked[e];e===c&&t===m.liar&&(console.log(c,e,m.liar,t),console.log("\uc774\uacbc\uad6c\ub9cc"),O((function(e){return!e})))}))}),[]),Object(o.jsxs)("div",{className:"finishModal frame modal",children:[Object(o.jsx)("div",{className:"title",children:!0===d?"\uac8c\uc784\uc5d0\uc11c \uc2b9\ub9ac\ud588\uc2b5\ub2c8\ub2e4":"\uac8c\uc784\uc5d0\uc11c \ud328\ubc30\ud588\uc2b5\ub2c8\ub2e4"}),!0===d?"":1===t?Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"\ub77c\uc774\uc5b4\ub294"}),Object(o.jsx)("div",{children:m.liar})]}):Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"\ub098\ub97c \ub77c\uc774\uc5b4\ub85c \uc9c0\ubaa9\ud55c \uc0ac\ub78c"}),Object(o.jsx)("div",{children:r.map((function(e,t){return Object(o.jsx)("span",{children:e},t)}))})]})]})};c(61);function v(e){var t=e.liar,c=Object(n.useState)(120),a=Object(i.a)(c,2),s=a[0],r=a[1],j=Object(n.useState)(!1),l=Object(i.a)(j,2),b=l[0],O=l[1],f=Object(n.useState)([]),h=Object(i.a)(f,2),m=h[0],v=h[1],g=Object(n.useState)(!1),k=Object(i.a)(g,2),N=k[0],_=k[1],y=Object(n.useContext)(S),C=Object(i.a)(y,2),E=C[0];C[1];Object(n.useEffect)((function(){v([{nickname:"\uc870\uc138\ud76c",vote:0},{nickname:"\ubb38\uc0c1\ud601",vote:0},{nickname:"\uc724\ub450\ud604",vote:0},{nickname:"\uc774\ud558\uc740",vote:0}]),M(),O(!0)}),[]);var M=function(){var e=120,t=setInterval((function(){if(r((function(e){return e-1}),e-=1),0===e){var c=m.find((function(e){return 1===e.vote}));w.emit("vote",c),_(!0),clearInterval(t)}}),1e3)};return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(S.Consumer,{children:function(){return b&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{children:s}),Object(o.jsxs)("div",{className:"inGame",children:[Object(o.jsx)(p.Provider,{value:[m,v],children:1===t?Object(o.jsx)(d,{liar:!1,title:"\ub204\uac00 \ub77c\uc774\uc5b4\uc785\ub2c8\uae4c?"}):Object(o.jsx)(d,{liar:!0,title:"\ub098\ub97c \uc9c0\ubaa9\ud55c \uc0ac\ub78c"})}),Object(o.jsx)(u,{title:1===t?"\ub2e8\uc5b4\ub97c \uc124\uba85\ud574\uc8fc\uc138\uc694":"\ub2e8\uc5b4\uc5d0 \ub300\ud574 \uc544\ub294\ucc99 \ud574\uc8fc\uc138\uc694",mount:b})]}),N&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(x,{liar:t,nickname:E}),Object(o.jsx)("div",{className:"modal-background"})]})]})}})})}var p=a.a.createContext();c(62);var g=function(e){var t=e.players;return Object(o.jsxs)("div",{className:"waitingRoom frame",children:[Object(o.jsx)("div",{className:"waitingRoom__title",children:Object(o.jsx)("p",{children:"\ub300\uae30\uc2e4"})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{children:["\ucc38\uc5ec\uc778\uc6d0 : ",t.length,"/4\uba85"]}),t.map((function(e,t){return Object(o.jsx)("div",{className:"waitingRoom__player",children:Object(o.jsx)("p",{children:e})},t)}))]})]})};c(63);var k=function(e){var t=e.liar,c=e.word;return Object(o.jsxs)("div",{className:"startGameModal frame modal",children:[Object(o.jsx)("div",{className:"title",children:t?Object(o.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uc785\ub2c8\ub2e4."}):Object(o.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uac00 \uc544\ub2d9\ub2c8\ub2e4."})}),!t&&Object(o.jsx)("div",{className:"word",children:Object(o.jsx)("div",{children:Object(o.jsx)("p",{children:c})})}),Object(o.jsx)("div",{className:"startGameModal__timer",children:"5\ucd08 \ub4a4 \uac8c\uc784\uc774 \uc2dc\uc791\ub429\ub2c8\ub2e4"})]})};c(64);function N(){var e=Object(n.useContext)(S),t=Object(i.a)(e,2),c=(t[0],t[1],Object(n.useContext)(M)),a=Object(n.useState)([]),s=Object(i.a)(a,2),r=s[0],j=s[1],l=Object(n.useState)(!1),d=Object(i.a)(l,2),O=d[0],m=d[1],x=Object(n.useState)(!1),v=Object(i.a)(x,2),p=v[0],N=v[1],_=Object(n.useState)("\ucef4\ub124"),y=Object(i.a)(_,2),C=y[0],E=y[1];Object(n.useEffect)((function(){return w.on("enter",function(){var e=Object(h.a)(f.a.mark((function e(t){var c,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.state,n=t.player,console.log("enter",n),"enter"===c&&j((function(e){return n}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w.on("gameset",(function(e){var t=e.state,c=e.player,n=e.liar,a=e.word;console.log("gameset",c,n,a),"gameset"===t&&(N(!!n),n&&E(a))})),w.offAny()}),[]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{onClick:function(){j([].concat(Object(b.a)(r),["John Doe"])),3===r.length&&(m(!0),setTimeout((function(){m(!1),c(p?2:1)}),5e3))},children:"\ud14c\uc2a4\ud2b8"}),Object(o.jsx)(M.Consumer,{children:function(){return Object(o.jsxs)("div",{className:"waiting",children:[Object(o.jsx)(g,{players:r}),Object(o.jsx)(u,{title:"\ucc44\ud305",mount:!0})]})}}),O&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(k,{liar:p,word:C}),Object(o.jsx)("div",{className:"modal-background"})]})]})}c(65);var _=function(){return Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("p",{children:"\ub77c\uc774\uc5b4\uac8c\uc784"}),Object(o.jsx)("div",{className:"header__exitBtn",onClick:function(){window.open("about:blank","_self"),window.close()},children:Object(o.jsx)("p",{children:"\ub098\uac00\uae30"})})]})};c(66);function y(e){var t=e.setNickname,c=Object(n.useState)(""),a=Object(i.a)(c,2),s=a[0],r=a[1],j=function(e){r(e.currentTarget.value)},l=function(e){t(s),w.emit("enter",{state:"enter",player:s}),console.log("emit 'enter' message : ")};return Object(o.jsx)(S.Consumer,{children:function(){return Object(o.jsxs)("div",{className:"nicknameModal frame modal",children:[Object(o.jsx)("div",{className:"title",children:"\uc548\ub155\ud558\uc138\uc694!"}),Object(o.jsx)("div",{className:"content",children:Object(o.jsx)("p",{children:"\uc0ac\uc6a9\ud560 \ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})}),Object(o.jsx)("input",{type:"text",placeholder:"\ub2c9\ub124\uc784",onChange:j}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{className:"submitBtn",onClick:l,children:"\ud655\uc778"})]})}})}var C=c(42),w=c.n(C).a.connect("".concat("http://13.125.236.234:3001/"));function E(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(0),r=Object(i.a)(s,2),j=r[0],l=r[1];return Object(n.useEffect)((function(){w.on("connection",(function(e){console.log(e)}),[])})),Object(o.jsx)(S.Provider,{value:[c,a],children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(_,{}),Object(o.jsx)(M.Provider,{value:l,children:0!==j?Object(o.jsx)(v,{liar:j}):Object(o.jsx)(N,{})}),!c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(y,{setNickname:a}),Object(o.jsx)("div",{className:"modal-background"})]})]})})}var S=a.a.createContext(),M=a.a.createContext();r.a.render(Object(o.jsx)(E,{}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.acc07a33.chunk.js.map