/*! For license information please see main.a973e935.chunk.js.LICENSE.txt */
(this.webpackJsonpliargame=this.webpackJsonpliargame||[]).push([[0],{24:function(e,t){function c(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}c.keys=function(){return[]},c.resolve=c,e.exports=c,c.id=24},25:function(e,t){},47:function(e,t,c){},48:function(e,t,c){},51:function(e,t,c){},53:function(e,t){},54:function(e,t){},55:function(e,t){},56:function(e,t){},57:function(e,t){},58:function(e,t){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},96:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(41),s=c.n(r),i=(c(47),c(2)),o=(c(48),c(8)),j=c.n(o),l=c(11),u=c(9),d=c(0);var b=function(e){var t=e.chat,c=t.content,n=t.from;return Object(d.jsxs)("span",{className:"self"===n?"chatMessage my_message":"chatMessage",children:[Object(d.jsx)("span",{className:"chat__profile",children:"self"===n?"":n}),Object(d.jsx)("span",{className:"chat__text",children:c})]})};c(51);var O=function(e){var t=e.title,c=e.mount,a=Object(n.useState)(""),r=Object(i.a)(a,2),s=r[0],o=r[1],O=Object(n.useState)([]),f=Object(i.a)(O,2),m=f[0],h=f[1],x=Object(n.useContext)(E),v=Object(i.a)(x,2),p=v[0],g=(v[1],function(e){o(e.currentTarget.value)}),k=function(e){e.preventDefault(),w.emit("chat",{state:"chat",name:p,text:s}),console.log(w),h((function(e){return[].concat(Object(u.a)(e),[{content:s,from:"self"}])})),o("")},N=function(e){"Enter"!==e.key&&"Return"!==e.key||(s&&h((function(e){return[].concat(Object(u.a)(e),[{content:s,from:"self"}])})),o(""))};return Object(n.useEffect)((function(){if(c)return document.getElementById("input-text").addEventListener("keypress",N),function(){try{document.getElementById("input-text").removeEventListener("keypress",N)}catch(e){console.log("\uc544\uc9c1..")}}})),Object(n.useEffect)((function(){return w.on("chat",function(){var e=Object(l.a)(j.a.mark((function e(t){var c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.state,n=t.name,a=t.text,console.log("chat",n,a),n=n===p?"self":n,"chat"===c&&h((function(e){return[].concat(Object(u.a)(e),[{content:a,from:n}])}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w.offAny()}),[]),Object(d.jsx)(E.Consumer,{children:function(){return Object(d.jsxs)("div",{className:"chat frame",children:[Object(d.jsx)("div",{className:"chat__title",children:Object(d.jsx)("p",{children:t})}),Object(d.jsx)("div",{className:"chat__content",children:m.map((function(e,t){return Object(d.jsx)(b,{chat:e,className:"chat__messages"},t)}))}),Object(d.jsxs)("div",{className:"chat__sender",children:[Object(d.jsx)("input",{type:"text",onChange:g,value:s,id:"input-text"}),Object(d.jsx)("button",{onClick:k,children:"\uc804\uc1a1"})]})]})}})};c(52),c(59);var f=function(e){var t=e.liar,c=e.title,a=Object(n.useState)(3),r=Object(i.a)(a,2),s=r[0],o=r[1],j=Object(n.useContext)(E),l=Object(i.a)(j,2),u=l[0],b=(l[1],Object(n.useContext)(v)),O=Object(i.a)(b,2),f=O[0],m=(O[1],function(e){s>0?(f.forEach((function(t){t.vote=t.nickname===e.currentTarget.getAttribute("data")?1:0})),console.log(f),o((function(e){return e-1}))):alert("\ub354 \uc774\uc0c1 \ud22c\ud45c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")});return Object(d.jsx)(v.Consumer,{children:function(){return Object(d.jsxs)("div",{className:"vote frame",children:[Object(d.jsx)("div",{className:"vote__title",children:Object(d.jsx)("p",{children:c})}),t?Object(d.jsx)("div",{className:"vote__status",children:f.map((function(e,t){return e.nickname!==u&&Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:e.nickname}),Object(d.jsx)("span",{children:"\ub098\ub97c \uc9c0\ubaa9"})]},t)}))}):Object(d.jsxs)("div",{className:"vote__players",children:[f.map((function(e,t){return e.nickname!==u&&Object(d.jsxs)("div",{onClick:m,data:e.nickname,className:"vote__cell"+(1===e.vote?" check":""),children:[Object(d.jsx)("span",{children:e.nickname}),Object(d.jsx)("div",{className:"vote__check",children:"O"})]},t)})),Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:["\ub0a8\uc740 \ud22c\ud45c \ud69f\uc218 : ",s,"/3 \ud68c"]})})]})]})}})},m=(c(60),{liar:"\uc870\uc138\ud76c",picked:{"\ubb38\uc0c1\ud601":"\uc870\uc138\ud76c","\uc774\ud558\uc740":"\uc870\uc138\ud76c","\uc815\uc138\uc740":"\ubb38\uc0c1\ud601"}});var h=function(e){var t=e.liar,c=e.nickname,a=Object(n.useState)([]),r=Object(i.a)(a,2),s=r[0],o=r[1],b=Object(n.useState)(!1),O=Object(i.a)(b,2),f=O[0],h=O[1];return Object(n.useEffect)((function(){if(console.log(m),w.on("result",function(){var e=Object(l.a)(j.a.mark((function e(t){var c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.state,n=t.liar,a=t.picked,console.log("result message received : ",n,a),"result"==c&&(m.liar=n,m.picked=a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),2===t){var e=0;Object.keys(m.picked).forEach((function(t){var c=m.picked[t];console.log(t,c),c===m.liar&&(e+=1,o((function(e){return[].concat(Object(u.a)(e),[t])})),console.log(s))})),h(!(e>=2))}else Object.keys(m.picked).forEach((function(e){var t=m.picked[e];e===c&&t===m.liar&&(console.log(c,e,m.liar,t),console.log("\uc774\uacbc\uad6c\ub9cc"),h((function(e){return!e})))}))}),[]),Object(d.jsxs)("div",{className:"finishModal frame modal",children:[Object(d.jsx)("div",{className:"title",children:!0===f?"\uac8c\uc784\uc5d0\uc11c \uc2b9\ub9ac\ud588\uc2b5\ub2c8\ub2e4":"\uac8c\uc784\uc5d0\uc11c \ud328\ubc30\ud588\uc2b5\ub2c8\ub2e4"}),!0===f?"":1===t?Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"\ub77c\uc774\uc5b4\ub294"}),Object(d.jsx)("div",{children:m.liar})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"\ub098\ub97c \ub77c\uc774\uc5b4\ub85c \uc9c0\ubaa9\ud55c \uc0ac\ub78c"}),Object(d.jsx)("div",{children:s.map((function(e,t){return Object(d.jsx)("span",{children:e},t)}))})]})]})};c(61);function x(e){var t=e.liar,c=Object(n.useState)(120),a=Object(i.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(!1),j=Object(i.a)(o,2),l=j[0],u=j[1],b=Object(n.useState)([]),m=Object(i.a)(b,2),x=m[0],p=m[1],g=Object(n.useState)(!1),k=Object(i.a)(g,2),N=k[0],_=k[1],y=Object(n.useContext)(E),C=Object(i.a)(y,2),S=C[0];C[1];Object(n.useEffect)((function(){p([{nickname:"\uc870\uc138\ud76c",vote:0},{nickname:"\ubb38\uc0c1\ud601",vote:0},{nickname:"\uc724\ub450\ud604",vote:0},{nickname:"\uc774\ud558\uc740",vote:0}]),F(),u(!0)}),[]);var F=function(){var e=120,t=setInterval((function(){if(s((function(e){return e-1}),e-=1),0===e){var c=x.find((function(e){return 1===e.vote}));w.emit("vote",c),_(!0),clearInterval(t)}}),1e3)};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(E.Consumer,{children:function(){return l&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{children:r}),Object(d.jsxs)("div",{className:"inGame",children:[Object(d.jsx)(v.Provider,{value:[x,p],children:1===t?Object(d.jsx)(f,{liar:!1,title:"\ub204\uac00 \ub77c\uc774\uc5b4\uc785\ub2c8\uae4c?"}):Object(d.jsx)(f,{liar:!0,title:"\ub098\ub97c \uc9c0\ubaa9\ud55c \uc0ac\ub78c"})}),Object(d.jsx)(O,{title:1===t?"\ub2e8\uc5b4\ub97c \uc124\uba85\ud574\uc8fc\uc138\uc694":"\ub2e8\uc5b4\uc5d0 \ub300\ud574 \uc544\ub294\ucc99 \ud574\uc8fc\uc138\uc694",mount:l})]}),N&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(h,{liar:t,nickname:S}),Object(d.jsx)("div",{className:"modal-background"})]})]})}})})}var v=a.a.createContext();c(62);var p=function(e){var t=e.players;return Object(d.jsxs)("div",{className:"waitingRoom frame",children:[Object(d.jsx)("div",{className:"waitingRoom__title",children:Object(d.jsx)("p",{children:"\ub300\uae30\uc2e4"})}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:["\ucc38\uc5ec\uc778\uc6d0 : ",t.length,"/4\uba85"]}),t.map((function(e,t){return Object(d.jsx)("div",{className:"waitingRoom__player",children:Object(d.jsx)("p",{children:e})},t)}))]})]})};c(63);var g=function(e){var t=e.liar,c=e.word;return Object(d.jsxs)("div",{className:"startGameModal frame modal",children:[Object(d.jsx)("div",{className:"title",children:t?Object(d.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uc785\ub2c8\ub2e4."}):Object(d.jsx)("p",{children:"\ub2f9\uc2e0\uc740 \ub77c\uc774\uc5b4\uac00 \uc544\ub2d9\ub2c8\ub2e4."})}),!t&&Object(d.jsx)("div",{className:"word",children:Object(d.jsx)("div",{children:Object(d.jsx)("p",{children:c})})}),Object(d.jsx)("div",{className:"startGameModal__timer",children:"5\ucd08 \ub4a4 \uac8c\uc784\uc774 \uc2dc\uc791\ub429\ub2c8\ub2e4"})]})};c(64);function k(){var e=Object(n.useContext)(E),t=Object(i.a)(e,2),c=t[0],a=(t[1],Object(n.useContext)(S)),r=Object(n.useState)([]),s=Object(i.a)(r,2),o=s[0],b=s[1],f=Object(n.useState)(!1),m=Object(i.a)(f,2),h=m[0],x=m[1],v=Object(n.useState)(!1),k=Object(i.a)(v,2),N=k[0],_=k[1],y=Object(n.useState)("\ucef4\ub124"),C=Object(i.a)(y,2),F=C[0],M=C[1];Object(n.useEffect)((function(){b([c])}),[c]),Object(n.useEffect)((function(){return w.on("enter",function(){var e=Object(l.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.state,n=t.player,console.log("enter",n),"enter"===c&&b((function(e){return[].concat(Object(u.a)(e),[n])}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w.on("gameset",(function(e){var t=e.state,c=e.player,n=e.liar,a=e.word;console.log("gameset",c,n,a),"gameset"===t&&(_(!!n),n&&M(a))})),w.offAny()}),[]);var B=function(){b([].concat(Object(u.a)(o),["John Doe"])),3===o.length&&(x(!0),setTimeout((function(){x(!1),a(N?2:1)}),5e3))};return Object(d.jsx)(E.Consumer,{children:function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:B,children:"\ud14c\uc2a4\ud2b8"}),Object(d.jsx)(S.Consumer,{children:function(){return Object(d.jsxs)("div",{className:"waiting",children:[Object(d.jsx)(p,{players:o}),Object(d.jsx)(O,{title:"\ucc44\ud305",mount:!0})]})}}),h&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(g,{liar:N,word:F}),Object(d.jsx)("div",{className:"modal-background"})]})]})}})}c(65);var N=function(){return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("p",{children:"\ub77c\uc774\uc5b4\uac8c\uc784"}),Object(d.jsx)("div",{className:"header__exitBtn",onClick:function(){window.open("about:blank","_self"),window.close()},children:Object(d.jsx)("p",{children:"\ub098\uac00\uae30"})})]})};c(66);function _(e){var t=e.setNickname,c=Object(n.useState)(""),a=Object(i.a)(c,2),r=a[0],s=a[1],o=function(e){s(e.currentTarget.value)},j=function(e){t(r),w.emit("enter"),console.log("emit 'enter' message : ")};return Object(d.jsx)(E.Consumer,{children:function(){return Object(d.jsxs)("div",{className:"nicknameModal frame modal",children:[Object(d.jsx)("div",{className:"title",children:"\uc548\ub155\ud558\uc138\uc694!"}),Object(d.jsx)("div",{className:"content",children:Object(d.jsx)("p",{children:"\uc0ac\uc6a9\ud560 \ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})}),Object(d.jsx)("input",{type:"text",placeholder:"\ub2c9\ub124\uc784",onChange:o}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"submitBtn",onClick:j,children:"\ud655\uc778"})]})}})}var y=c(42),w=c.n(y).a.connect("".concat("localhost:3001/"),{transport:["websocket"]});function C(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(0),s=Object(i.a)(r,2),o=s[0],j=s[1];return Object(n.useEffect)((function(){w.on("connection",(function(e){console.log(e)}),[])})),Object(d.jsx)(E.Provider,{value:[c,a],children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(N,{}),Object(d.jsx)(S.Provider,{value:j,children:0!==o?Object(d.jsx)(x,{liar:o}):Object(d.jsx)(k,{})}),!c&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(_,{setNickname:a}),Object(d.jsx)("div",{className:"modal-background"})]})]})})}var E=a.a.createContext(),S=a.a.createContext();s.a.render(Object(d.jsx)(C,{}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.a973e935.chunk.js.map